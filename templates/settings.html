{% extends 'base.html' %}
{% block title %}Settings - Sentiment App{% endblock %}
{% block breadcrumbs %}⚙️ Settings{% endblock %}
{% block content %}
  <h1>Settings</h1>
  <form id="settingsForm" class="section theme-indigo" style="padding:16px; border-radius:14px">
    <div class="controls" style="flex-wrap:wrap">
      <label style="margin:0">Default Tone</label>
      <select name="default_tone" style="padding:8px 10px; border-radius:8px; background:rgba(0,0,0,0.1); color:inherit; border:1px solid var(--border)">
        <option value="">System default</option>
        <option value="listening" {% if settings.default_tone=='listening' %}selected{% endif %}>Listening</option>
        <option value="coaching" {% if settings.default_tone=='coaching' %}selected{% endif %}>Coaching</option>
      </select>
      <label style="margin:0">Default Model</label>
      <select name="default_model" style="padding:8px 10px; border-radius:8px; background:rgba(0,0,0,0.1); color:inherit; border:1px solid var(--border)">
        <option value="">System default</option>
        <option value="vader" {% if settings.default_model=='vader' %}selected{% endif %}>VADER (fast)</option>
        <option value="rule" {% if settings.default_model=='rule' %}selected{% endif %}>Rule-based (demo)</option>
      </select>
      <button type="submit">Save</button>
    </div>
  </form>
  <script>
  (function(){
    const form = document.getElementById('settingsForm');
    form?.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(form);
      const body = Object.fromEntries(fd.entries());
      const resp = await fetch('/settings', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(body) });
      if (resp.ok) alert('Saved'); else alert('Failed to save');
    });
  })();
  </script>
{% endblock %}
