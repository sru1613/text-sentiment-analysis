<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sentiment Analyzer</title>
  <!-- inline 1x1 PNG favicon to avoid default /favicon.ico 404 when served by live-server -->
  <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=">
  <link rel="stylesheet" href="/static/styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <main>
    <h1>Sentiment Analyzer</h1>
    <div class="toolbar">
      <button id="expandAllBtn" class="ghost">Expand all</button>
      <button id="collapseAllBtn" class="ghost">Collapse all</button>
      <label id="theme-toggle-button" title="Toggle theme">
        <input type="checkbox" id="toggle" aria-label="Theme toggle" />
        <svg xmlns="http://www.w3.org/2000/svg" width="56" viewBox="0 0 48 24">
          <rect id="container" width="48" height="24" rx="12" fill="#f0e9d2"/>
          <g id="patches"><circle cx="10" cy="7" r="2" fill="#e7d9b5"/><circle cx="18" cy="5" r="1.5" fill="#e7d9b5"/></g>
          <g id="stars"><circle cx="30" cy="6" r="1" fill="#fff"/><circle cx="36" cy="9" r="1" fill="#fff"/><circle cx="42" cy="5" r="1" fill="#fff"/></g>
          <g id="cloud"><ellipse cx="20" cy="15" rx="5" ry="2" fill="#fff" opacity="0.9"/></g>
          <g id="sun"><circle cx="12" cy="12" r="5" fill="#ffcc33"/></g>
          <g id="moon"><path d="M36 12a5 5 0 1 1-4.5-7 7 7 0 1 0 4.5 7z" fill="#f1f4ff"/></g>
          <circle id="button" cx="12" cy="12" r="10" fill="#ffffff"/>
        </svg>
      </label>
    </div>

    <div class="section theme-rose" aria-expanded="true" data-key="sec-analyze">
      <button class="section-header" type="button">
        <span class="icon" aria-hidden>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M4 4v16"/><path d="M8 8h12"/><path d="M8 12h12"/></svg>
        </span>
        <h2>Analyze Text / File</h2>
        <span class="chevron" aria-hidden>▾</span>
      </button>
      <div class="section-content">
        <section class="input">
          <label for="text">Enter text to analyze</label>
          <textarea id="text" rows="6" placeholder="Type or paste text here..."></textarea>
          <div class="controls">
            <button id="analyzeBtn">Analyze Text</button>
            <input type="file" id="fileInput" accept=".txt" />
            <button id="analyzeFileBtn">Analyze File</button>
          </div>
        </section>
      </div>
    </div>

    <div class="section theme-amber" aria-expanded="true" data-key="sec-result">
      <button class="section-header" type="button">
        <span class="icon" aria-hidden>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="9" y1="17" x2="9" y2="7"/><line x1="15" y1="17" x2="15" y2="11"/></svg>
        </span>
        <h2>Result</h2>
        <span class="chevron" aria-hidden>▾</span>
      </button>
      <div class="section-content">
        <section class="result">
          <div id="summary" class="summary">No analysis yet</div>
          <canvas id="scoresChart" width="400" height="200"></canvas>
        </section>
      </div>
    </div>

    <div class="section theme-teal" aria-expanded="false" data-key="sec-csv">
      <button class="section-header" type="button">
        <span class="icon" aria-hidden>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3h18v4H3z"/><path d="M3 7h18v14H3z"/><path d="M7 10h3M7 14h3M7 18h3M14 10h3M14 14h3M14 18h3"/></svg>
        </span>
        <h2>CSV Batch Analysis</h2>
        <span class="chevron" aria-hidden>▾</span>
      </button>
      <div class="section-content">
        <section class="batch">
          <p>Upload a CSV file that has a column named <strong>text</strong>.</p>
          <div class="controls">
            <input type="file" id="csvInput" accept=".csv" />
            <button id="analyzeCsvBtn">Analyze CSV</button>
            <button id="downloadCsvBtn" disabled>Download Results (CSV)</button>
          </div>
          <div id="csvSummary" class="summary" style="margin-top:12px">No CSV analyzed yet</div>
        </section>
      </div>
    </div>

    <div class="section theme-indigo" aria-expanded="false" data-key="sec-history">
      <button class="section-header" type="button">
        <span class="icon" aria-hidden>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
        </span>
        <h2>Recent History</h2>
        <span class="chevron" aria-hidden>▾</span>
      </button>
      <div class="section-content">
        <section class="history">
          <div class="controls">
            <button id="refreshHistoryBtn">Refresh</button>
          </div>
          <div id="historyList" class="summary" style="margin-top:12px">No history yet</div>
        </section>
      </div>
    </div>

    <div class="section theme-rose" aria-expanded="false" data-key="sec-chat">
      <button class="section-header" type="button">
        <span class="icon" aria-hidden>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
        </span>
        <h2>Chatbot</h2>
        <span class="chevron" aria-hidden>▾</span>
      </button>
      <div class="section-content">
        <section class="chat">
          <div class="chat-top-controls controls" style="flex-wrap:wrap; gap:8px">
            <label for="toneSelect" style="margin:0; font-weight:600">Tone:</label>
            <select id="toneSelect" style="padding:8px 10px; border-radius:8px; background:rgba(0,0,0,0.1); color:inherit; border:1px solid rgba(255,255,255,0.15)">
              <option value="listening">Listening (empathetic)</option>
              <option value="coaching">Coaching (action-focused)</option>
            </select>
            <div id="quickReplies" class="chips" style="display:flex; flex-wrap:wrap; gap:8px; margin-left:auto"></div>
          </div>
          <div id="chatMessages" class="summary" style="min-height:100px">Say hello to start chatting…</div>
          <div class="controls">
            <input id="chatInput" type="text" placeholder="Type your message…" style="flex:1; padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,0.15); background:rgba(0,0,0,0.1); color:inherit" />
            <button id="chatSendBtn">Send</button>
          </div>
        </section>
      </div>
    </div>

    <footer>
      <!-- footer intentionally left minimal -->
    </footer>
  </main>

  <script src="/static/main.js"></script>
</body>
</html>
