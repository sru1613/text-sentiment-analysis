:root{
	--bg:#192d42; /* slightly lighter deep navy */
	--card:#203752;
	--muted:#aeb9c9;
	--text:#f5f9fc;
	--accent1:#339ff2;
	--accent2:#52d7c7;
	--accent3:#ff945f;
	--glass: rgba(255,255,255,0.05);
	--border: rgba(255,255,255,0.15);

	/* Accent palette base (default = blue/teal) */
	--accent-gradient: linear-gradient(92deg,var(--accent1),var(--accent2));

	/* Section theme palettes */
	--rose-bg:#23283d; --rose-card:#2c334d; --rose-text:#f4eaff; --rose-accent:#c98bff;
	--amber-bg:#272f3d; --amber-card:#303a49; --amber-text:#ffe6be; --amber-accent:#ffbd63;
	--teal-bg:#153842; --teal-card:#1c4752; --teal-text:#c9fdf8; --teal-accent:#37d6d2;
	--indigo-bg:#212f4b; --indigo-card:#28385c; --indigo-text:#dae4ff; --indigo-accent:#7aa2ff;
}

/* Accent presets applied via data-accent on html */
html[data-accent="purple"]{
	--accent1:#8b5cf6;
	--accent2:#ec4899;
	--accent3:#f59e0b;
	--accent-gradient: linear-gradient(90deg,#8b5cf6,#ec4899);
}
html[data-accent="cyan"]{
	--accent1:#06b6d4;
	--accent2:#3b82f6;
	--accent3:#f59e0b;
	--accent-gradient: linear-gradient(90deg,#06b6d4,#3b82f6);
}

*{box-sizing:border-box}
body{
	font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
	margin:0; padding:36px; background:
		radial-gradient(1000px 520px at 15% 20%, rgba(63,180,255,0.18), transparent 60%),
		radial-gradient(900px 500px at 85% 80%, rgba(109,220,207,0.16), transparent 65%),
		radial-gradient(600px 420px at 80% 15%, rgba(255,139,94,0.15), transparent 70%),
		var(--bg);
	background-attachment: fixed;
	color: var(--text);
}

/* Light theme support */
.theme-light{
	--bg:#f4f8fb; /* soft mist */
	--card:#ffffff;
	--muted:#546170;
	--text:#1a2430;
	--accent1:#007dd9; /* stronger blue */
	--accent2:#1fb9a8; /* teal */
	--accent3:#ff7a3c; /* warm accent */

	--border: rgba(0,0,0,0.14);

	--rose-bg:#f4f4ff; --rose-card:#eceefe; --rose-text:#2e3150; --rose-accent:#7a5bff;
	--amber-bg:#fff9ed; --amber-card:#fff3da; --amber-text:#5b4015; --amber-accent:#f6a727;
	--teal-bg:#ecfbfd; --teal-card:#def6f5; --teal-text:#104245; --teal-accent:#12a6a1;
	--indigo-bg:#eef3ff; --indigo-card:#e4ecff; --indigo-text:#162749; --indigo-accent:#4d7fff;
}

/* Theme toggle control (provided CSS) */
#theme-toggle-button {
  font-size: 17px;
  position: relative;
  display: inline-block;
  width: 7em;
  cursor: pointer;
}

/* Hide default HTML checkbox */
#toggle {
  opacity: 0;
  width: 0;
  height: 0;
}

#container,
#patches,
#stars,
#button,
#sun,
#moon,
#cloud {
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 0.25s;
}

/* night sky background */
#toggle:checked + svg #container {
  fill: #2b4360;
}

/* move button to right when checked */
#toggle:checked + svg #button {
	transform: translateX(28px);
}

/* Ensure the knob is vertically centered */
#button{ transform: translateY(0); }

/* show/hide sun and moon based on checkbox state */
#sun { opacity: 1; }
#toggle:checked + svg #sun { opacity: 0; }
#moon { opacity: 0; }
#toggle:checked + svg #moon { opacity: 1; }

/* show or hide background items on checkbox state */
#cloud { opacity: 1; }
#toggle:checked + svg #cloud { opacity: 0; }
#stars { opacity: 0; }
#toggle:checked + svg #stars { opacity: 1; }

/* Simple chat tweaks */
.chat #chatMessages{ min-height:120px; display:flex; flex-direction:column; gap:10px }
.chat .controls{ margin-top:12px }

/* Chat bubbles */
.chat-msg{ max-width:80%; padding:10px 12px; border-radius:14px; border:1px solid var(--border); box-shadow: 0 4px 14px rgba(0,0,0,0.15) }
.chat-msg.user{ align-self:flex-end; background: linear-gradient(90deg,var(--accent1),var(--accent2)); color:#111 }
.chat-msg.bot{ align-self:flex-start; background: var(--card); color: var(--text) }
/* Wordcloud wrapper overrides */
#wordcloudWrap img{ background: rgba(0,0,0,0.05); }
.chat-msg .time{ margin-top:6px; font-size:11px; opacity:0.75 }
.chat-msg.typing{ background: rgba(255,255,255,0.06); color: var(--text); border-style:dashed }
.chat-msg .badge{ display:inline-block; margin-left:8px; padding:2px 6px; font-size:10px; border-radius:999px; border:1px solid var(--border); opacity:0.85 }
.badge.coaching{ background: rgba(38,214,201,0.12) }
.badge.listening{ background: rgba(125,140,255,0.12) }

@keyframes typingDots{ 0%{ opacity:0.2 } 50%{ opacity:1 } 100%{ opacity:0.2 } }
.typing .dots{ display:inline-block; margin-left:4px }
.typing .dot{ display:inline-block; width:4px; height:4px; margin:0 2px; border-radius:50%; background: currentColor; animation: typingDots 1.2s infinite }
.typing .dot:nth-child(2){ animation-delay:.2s }
.typing .dot:nth-child(3){ animation-delay:.4s }

/* Quick reply chips */
.chips button{
	background: transparent;
	color: inherit;
	border: 1px solid var(--border);
	box-shadow: none;
	padding: 6px 10px;
	border-radius: 999px;
	font-weight: 600;
}
.chips button:hover{ background: rgba(255,255,255,0.06) }

main{
	max-width:980px; margin:0 auto; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
	padding:28px; border-radius:14px; box-shadow: 0 10px 40px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03);
}

h1{ margin:0 0 12px 0; font-size:28px; letter-spacing:0.2px; color: #fff }
h1{ color: var(--text) }

.toolbar{ display:flex; gap:8px; justify-content:flex-end; margin:8px 0 16px 0 }
.toolbar .ghost{ background:transparent; color:inherit; border:1px solid var(--border); box-shadow:none }
.toolbar .ghost:hover{ background:rgba(255,255,255,0.06) }

/* Section container */
.section{ margin:18px 0; border-radius:14px; overflow:hidden; border:1px solid rgba(255,255,255,0.05);
	box-shadow: 0 12px 36px rgba(0,0,0,0.25); transition: transform .18s ease, box-shadow .18s ease }
.section:hover{ transform: translateY(-2px); box-shadow: 0 18px 48px rgba(0,0,0,0.3) }

.section-header{ width:100%; text-align:left; display:flex; justify-content:space-between; align-items:center; gap:12px;
	padding:16px 18px; border:0; cursor:pointer; background:transparent; color:inherit; font-weight:800; font-size:18px }
.section-header h2{ margin:0; font-size:18px; letter-spacing:.2px }
.section-header .icon{ display:inline-flex; width:28px; height:28px; align-items:center; justify-content:center; opacity:0.9 }
.section[aria-expanded="true"] .chevron{ transform: rotate(180deg) }
.chevron{ transition: transform .18s ease }

.section-content{ max-height:0; overflow:hidden; transition: max-height .28s ease, opacity .28s ease; opacity:0 }
.section[aria-expanded="true"] .section-content{ opacity:1; max-height:800px }

/* Theme variants */
.theme-rose{ background: var(--rose-bg); color: var(--rose-text) }
.theme-rose .section-header{ background: linear-gradient(180deg, rgba(255,107,159,0.08), rgba(255,107,159,0.03)); border-bottom:1px solid rgba(255,107,159,0.18) }
.theme-rose .summary, .theme-rose textarea, .theme-rose .chartWrap{ background: var(--rose-card); border-color: rgba(255,107,159,0.2) }
.theme-rose button{ background: linear-gradient(90deg, var(--rose-accent), #ffd6e6) }

.theme-amber{ background: var(--amber-bg); color: var(--amber-text) }
.theme-amber .section-header{ background: linear-gradient(180deg, rgba(255,191,71,0.12), rgba(255,191,71,0.04)); border-bottom:1px solid rgba(255,191,71,0.22) }
.theme-amber .summary, .theme-amber .chartWrap{ background: var(--amber-card); border-color: rgba(255,191,71,0.2) }
.theme-amber button{ background: linear-gradient(90deg, var(--amber-accent), #ffe7b3) }

.theme-teal{ background: var(--teal-bg); color: var(--teal-text) }
.theme-teal .section-header{ background: linear-gradient(180deg, rgba(38,214,201,0.12), rgba(38,214,201,0.04)); border-bottom:1px solid rgba(38,214,201,0.22) }
.theme-teal .summary, .theme-teal input[type="file"]{ background: var(--teal-card); border-color: rgba(38,214,201,0.2) }
.theme-teal button{ background: linear-gradient(90deg, var(--teal-accent), #b9fff5) }

.theme-indigo{ background: var(--indigo-bg); color: var(--indigo-text) }
.theme-indigo .section-header{ background: linear-gradient(180deg, rgba(125,140,255,0.12), rgba(125,140,255,0.04)); border-bottom:1px solid rgba(125,140,255,0.22) }
.theme-indigo .summary{ background: var(--indigo-card); border-color: rgba(125,140,255,0.2) }
.theme-indigo button{ background: linear-gradient(90deg, var(--indigo-accent), #d7dbff) }

.input{ display:block }
label{ display:block; font-weight:600; color:var(--muted); margin-bottom:8px }

textarea{
	width:100%; min-height:140px; padding:14px; font-size:15px; border-radius:10px; resize:vertical;
	background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
	border:1px solid rgba(255,255,255,0.04); color: inherit; outline:none; transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}
textarea:focus{ box-shadow: 0 8px 30px rgba(255,107,159,0.08); transform: translateY(-2px); border-color: var(--accent1) }

.controls{ margin-top:12px; display:flex; gap:10px; align-items:center }

button{ display:inline-flex; gap:8px; align-items:center; padding:10px 14px; border-radius:10px; cursor:pointer;
	border: none; background: var(--accent-gradient); color:#0d1b26; font-weight:700; box-shadow: 0 6px 20px rgba(51,159,242,0.25); transition: transform .14s ease, box-shadow .18s ease, opacity .14s ease;
}
button:hover{ transform: translateY(-4px) scale(1.01); box-shadow: 0 16px 38px rgba(63,180,255,0.28) }
button:active{ transform: translateY(-1px) scale(0.995); opacity:0.96 }

input[type="file"]{ color:var(--muted); }

.result{ margin-top:22px; display:flex; gap:18px; align-items:flex-start }

.summary{ flex:1; padding:18px; border-radius:12px; background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03);
	box-shadow: 0 8px 30px rgba(2,6,23,0.5); transition: transform .12s ease }
.summary:hover{ transform: translateY(-6px) }

.label{ display:flex; align-items:center; gap:12px; font-size:20px; font-weight:800 }
.label .emoji{ font-size:34px; filter: drop-shadow(0 6px 18px rgba(255,89,94,0.12)) }
.scores{ margin-top:10px; color:var(--muted); font-weight:600 }

.chartWrap{ width:420px; min-height:200px; padding:12px; border-radius:12px; background: linear-gradient(180deg, rgba(63,180,255,0.10), rgba(109,220,207,0.05)); border:1px solid rgba(255,255,255,0.05); box-shadow: 0 12px 36px rgba(31,112,168,0.25) }

.meta{ margin-top:8px; color:var(--muted); font-size:13px }

footer{ margin-top:18px; color:var(--muted); font-size:13px; min-height:28px; padding:6px 0 }

/* Tiny sentiment bar for chat messages */
.sentibar{ display:inline-flex; gap:6px; align-items:center; margin-top:6px }
.sentibar .bar{ display:inline-flex; height:6px; width:120px; border-radius:4px; overflow:hidden; border:1px solid var(--border); background: rgba(255,255,255,0.06) }
.sentibar .seg{ height:100% }
.sentibar .pos{ background:#4caf50 }
.sentibar .neu{ background:#9e9e9e }
.sentibar .neg{ background:#f44336 }
.sentibar .label{ font-size:11px; opacity:0.85 }

/* Small screens */
@media (max-width:800px){
	.result{ flex-direction:column }
	.chartWrap{ width:100% }
	.section-content{ max-height:unset }
}

/* Score bars */
.score-bars .meter{ position:relative; height:10px; border-radius:6px; background:rgba(255,255,255,0.07); overflow:hidden; margin-bottom:6px; box-shadow:inset 0 0 0 1px rgba(255,255,255,0.05) }
.score-bars .meter span{ position:absolute; left:0; top:0; bottom:0; border-radius:6px; display:block; transition:width .6s cubic-bezier(.4,0,.2,1); background:linear-gradient(90deg,var(--accent1),var(--accent2)) }
.score-bars .meter span.neu{ background:linear-gradient(90deg,#9e9e9e,#c1c1c1) }
.score-bars .meter span.neg{ background:linear-gradient(90deg,#f44336,#e53935) }

/* Keyword chips */
#keywordChips .chip{ background:rgba(255,255,255,0.08); color:var(--text); border:1px solid rgba(255,255,255,0.15); border-radius:999px; padding:6px 12px; font-size:12px; letter-spacing:.3px; font-weight:600; cursor:default; box-shadow:0 2px 6px rgba(0,0,0,0.3); }
#keywordChips .chip:hover{ background:rgba(255,255,255,0.12) }

/* History table */
#historyTable thead{ background:rgba(255,255,255,0.06); position:sticky; top:0; backdrop-filter:blur(4px) }
#historyTable th, #historyTable td{ padding:10px 12px; text-align:left; border-bottom:1px solid rgba(255,255,255,0.05) }
#historyTable tbody tr:hover{ background:rgba(255,255,255,0.05) }
#historyTable th{ cursor:pointer; user-select:none; font-weight:600; letter-spacing:.5px }
#historyTable .badge{ display:inline-block; padding:3px 8px; border-radius:999px; font-size:11px; font-weight:600; background:rgba(255,255,255,0.1); border:1px solid var(--border) }
#historyTable .badge.pos{ background:linear-gradient(90deg,#4caf50,#66bb6a); color:#0d260f }
#historyTable .badge.neg{ background:linear-gradient(90deg,#f44336,#e53935); color:#2b0a08 }
#historyTable .badge.neu{ background:linear-gradient(90deg,#9e9e9e,#bdbdbd); color:#1d1d1d }

/* Drag & Drop Zone */
.drop-zone{ position:relative; border:2px dashed rgba(255,255,255,0.25); background:rgba(255,255,255,0.03); padding:40px 24px; text-align:center; border-radius:16px; cursor:pointer; transition: border-color .25s ease, background .25s ease, box-shadow .25s ease }
.drop-zone:focus{ outline:2px solid var(--accent2); outline-offset:3px }
.drop-zone:hover{ background:rgba(255,255,255,0.06) }
.drop-zone.dragover{ border-color: var(--accent1); background: rgba(255,255,255,0.1); box-shadow:0 0 0 4px rgba(255,255,255,0.05), 0 0 0 2px var(--accent1) inset }
.drop-zone .dz-instructions{ font-size:14px; line-height:1.5; letter-spacing:.4px; color: var(--muted) }
.drop-zone .dz-instructions .dz-browse{ color: var(--accent1); text-decoration:underline }
.drop-zone .dz-file{ margin-top:14px; font-size:13px; color:var(--text); font-weight:600; word-break:break-all }

/* Navigation / header / accent palette (migrated from inline style) */
.nav{display:flex; gap:12px; align-items:center; justify-content:space-between; margin-bottom:12px}
.nav a{ color:inherit; text-decoration:none; border:1px solid var(--border); padding:8px 12px; border-radius:8px }
.nav a:hover{ background: rgba(255,255,255,0.06) }
.nav a.active{ background: rgba(255,255,255,0.12) }
.float-chat{ position: fixed; right: 18px; bottom: 18px; z-index: 9999 }
.float-chat button{ width:56px; height:56px; border-radius:999px; display:flex; align-items:center; justify-content:center }
.accent-palette{display:inline-flex; gap:6px; margin-left:12px}
.accent-swatch{width:20px; height:20px; border-radius:6px; cursor:pointer; border:1px solid var(--border); box-shadow:0 2px 6px rgba(0,0,0,0.3); position:relative; overflow:hidden}
.accent-swatch span{position:absolute; inset:0;}
.accent-swatch[data-accent="blue"] span{background:linear-gradient(135deg,#339ff2,#52d7c7)}
.accent-swatch[data-accent="purple"] span{background:linear-gradient(135deg,#8b5cf6,#ec4899)}
.accent-swatch[data-accent="cyan"] span{background:linear-gradient(135deg,#06b6d4,#3b82f6)}
.accent-swatch.active{outline:2px solid var(--accent2); outline-offset:2px}
