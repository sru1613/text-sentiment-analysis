:root{
	--bg:#2a0b12; /* warm deep maroon */
	--card:#0b1220;
	--muted:#98a0b3;
	--text:#e6eef8;
	--accent1:#ff6b9f; /* pink */
	--accent2:#ffd166; /* yellow */
	--accent3:#ff595e; /* red */
	--glass: rgba(255,255,255,0.04);

	--border: rgba(255,255,255,0.18);

	/* Section theme palettes */
	--rose-bg: #2b0f1a; --rose-card:#3a1020; --rose-text:#ffd6e6; --rose-accent:#ff6b9f;
	--amber-bg:#2b1d0f; --amber-card:#3a2a10; --amber-text:#ffe7b3; --amber-accent:#ffbf47;
	--teal-bg:#0f2b2a; --teal-card:#103a38; --teal-text:#b9fff5; --teal-accent:#26d6c9;
	--indigo-bg:#151b2f; --indigo-card:#1b2440; --indigo-text:#d7dbff; --indigo-accent:#7d8cff;
}

*{box-sizing:border-box}
body{
	font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
	margin:0; padding:36px; background: radial-gradient(1200px 600px at 10% 10%, rgba(255,107,159,0.06), transparent 8%),
		radial-gradient(1000px 500px at 90% 90%, rgba(255,209,102,0.04), transparent 8%),
		var(--bg);
	color: var(--text);
}

/* Light theme support */
.theme-light{
	--bg:#faf7f5;
	--card:#ffffff;
	--muted:#4b5563;
	--text:#111827;
	--accent1:#ff6b9f;
	--accent2:#ffbf47;
	--accent3:#ff595e;

	--border: rgba(0,0,0,0.15);

	--rose-bg:#fff3f8; --rose-card:#ffe6ef; --rose-text:#5b1f33; --rose-accent:#e11d48;
	--amber-bg:#fff8eb; --amber-card:#fff0d1; --amber-text:#5b3a11; --amber-accent:#f59e0b;
	--teal-bg:#eafffb; --teal-card:#ddfbf7; --teal-text:#073a37; --teal-accent:#0ea5a5;
	--indigo-bg:#eef0ff; --indigo-card:#e3e7ff; --indigo-text:#172554; --indigo-accent:#6366f1;
}

/* Theme toggle control (provided CSS) */
#theme-toggle-button {
  font-size: 17px;
  position: relative;
  display: inline-block;
  width: 7em;
  cursor: pointer;
}

/* Hide default HTML checkbox */
#toggle {
  opacity: 0;
  width: 0;
  height: 0;
}

#container,
#patches,
#stars,
#button,
#sun,
#moon,
#cloud {
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 0.25s;
}

/* night sky background */
#toggle:checked + svg #container {
  fill: #2b4360;
}

/* move button to right when checked */
#toggle:checked + svg #button {
	transform: translateX(28px);
}

/* Ensure the knob is vertically centered */
#button{ transform: translateY(0); }

/* show/hide sun and moon based on checkbox state */
#sun { opacity: 1; }
#toggle:checked + svg #sun { opacity: 0; }
#moon { opacity: 0; }
#toggle:checked + svg #moon { opacity: 1; }

/* show or hide background items on checkbox state */
#cloud { opacity: 1; }
#toggle:checked + svg #cloud { opacity: 0; }
#stars { opacity: 0; }
#toggle:checked + svg #stars { opacity: 1; }

/* Simple chat tweaks */
.chat #chatMessages{ min-height:120px; display:flex; flex-direction:column; gap:10px }
.chat .controls{ margin-top:12px }

/* Chat bubbles */
.chat-msg{ max-width:80%; padding:10px 12px; border-radius:14px; border:1px solid var(--border); box-shadow: 0 4px 14px rgba(0,0,0,0.15) }
.chat-msg.user{ align-self:flex-end; background: linear-gradient(90deg,var(--accent1),var(--accent2)); color:#111 }
.chat-msg.bot{ align-self:flex-start; background: var(--card); color: var(--text) }
/* Wordcloud wrapper overrides */
#wordcloudWrap img{ background: rgba(0,0,0,0.05); }
.chat-msg .time{ margin-top:6px; font-size:11px; opacity:0.75 }
.chat-msg.typing{ background: rgba(255,255,255,0.06); color: var(--text); border-style:dashed }
.chat-msg .badge{ display:inline-block; margin-left:8px; padding:2px 6px; font-size:10px; border-radius:999px; border:1px solid var(--border); opacity:0.85 }
.badge.coaching{ background: rgba(38,214,201,0.12) }
.badge.listening{ background: rgba(125,140,255,0.12) }

@keyframes typingDots{ 0%{ opacity:0.2 } 50%{ opacity:1 } 100%{ opacity:0.2 } }
.typing .dots{ display:inline-block; margin-left:4px }
.typing .dot{ display:inline-block; width:4px; height:4px; margin:0 2px; border-radius:50%; background: currentColor; animation: typingDots 1.2s infinite }
.typing .dot:nth-child(2){ animation-delay:.2s }
.typing .dot:nth-child(3){ animation-delay:.4s }

/* Quick reply chips */
.chips button{
	background: transparent;
	color: inherit;
	border: 1px solid var(--border);
	box-shadow: none;
	padding: 6px 10px;
	border-radius: 999px;
	font-weight: 600;
}
.chips button:hover{ background: rgba(255,255,255,0.06) }

main{
	max-width:980px; margin:0 auto; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
	padding:28px; border-radius:14px; box-shadow: 0 10px 40px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03);
}

h1{ margin:0 0 12px 0; font-size:28px; letter-spacing:0.2px; color: #fff }
h1{ color: var(--text) }

.toolbar{ display:flex; gap:8px; justify-content:flex-end; margin:8px 0 16px 0 }
.toolbar .ghost{ background:transparent; color:inherit; border:1px solid var(--border); box-shadow:none }
.toolbar .ghost:hover{ background:rgba(255,255,255,0.06) }

/* Section container */
.section{ margin:18px 0; border-radius:14px; overflow:hidden; border:1px solid rgba(255,255,255,0.05);
	box-shadow: 0 12px 36px rgba(0,0,0,0.25); transition: transform .18s ease, box-shadow .18s ease }
.section:hover{ transform: translateY(-2px); box-shadow: 0 18px 48px rgba(0,0,0,0.3) }

.section-header{ width:100%; text-align:left; display:flex; justify-content:space-between; align-items:center; gap:12px;
	padding:16px 18px; border:0; cursor:pointer; background:transparent; color:inherit; font-weight:800; font-size:18px }
.section-header h2{ margin:0; font-size:18px; letter-spacing:.2px }
.section-header .icon{ display:inline-flex; width:28px; height:28px; align-items:center; justify-content:center; opacity:0.9 }
.section[aria-expanded="true"] .chevron{ transform: rotate(180deg) }
.chevron{ transition: transform .18s ease }

.section-content{ max-height:0; overflow:hidden; transition: max-height .28s ease, opacity .28s ease; opacity:0 }
.section[aria-expanded="true"] .section-content{ opacity:1; max-height:800px }

/* Theme variants */
.theme-rose{ background: var(--rose-bg); color: var(--rose-text) }
.theme-rose .section-header{ background: linear-gradient(180deg, rgba(255,107,159,0.08), rgba(255,107,159,0.03)); border-bottom:1px solid rgba(255,107,159,0.18) }
.theme-rose .summary, .theme-rose textarea, .theme-rose .chartWrap{ background: var(--rose-card); border-color: rgba(255,107,159,0.2) }
.theme-rose button{ background: linear-gradient(90deg, var(--rose-accent), #ffd6e6) }

.theme-amber{ background: var(--amber-bg); color: var(--amber-text) }
.theme-amber .section-header{ background: linear-gradient(180deg, rgba(255,191,71,0.12), rgba(255,191,71,0.04)); border-bottom:1px solid rgba(255,191,71,0.22) }
.theme-amber .summary, .theme-amber .chartWrap{ background: var(--amber-card); border-color: rgba(255,191,71,0.2) }
.theme-amber button{ background: linear-gradient(90deg, var(--amber-accent), #ffe7b3) }

.theme-teal{ background: var(--teal-bg); color: var(--teal-text) }
.theme-teal .section-header{ background: linear-gradient(180deg, rgba(38,214,201,0.12), rgba(38,214,201,0.04)); border-bottom:1px solid rgba(38,214,201,0.22) }
.theme-teal .summary, .theme-teal input[type="file"]{ background: var(--teal-card); border-color: rgba(38,214,201,0.2) }
.theme-teal button{ background: linear-gradient(90deg, var(--teal-accent), #b9fff5) }

.theme-indigo{ background: var(--indigo-bg); color: var(--indigo-text) }
.theme-indigo .section-header{ background: linear-gradient(180deg, rgba(125,140,255,0.12), rgba(125,140,255,0.04)); border-bottom:1px solid rgba(125,140,255,0.22) }
.theme-indigo .summary{ background: var(--indigo-card); border-color: rgba(125,140,255,0.2) }
.theme-indigo button{ background: linear-gradient(90deg, var(--indigo-accent), #d7dbff) }

.input{ display:block }
label{ display:block; font-weight:600; color:var(--muted); margin-bottom:8px }

textarea{
	width:100%; min-height:140px; padding:14px; font-size:15px; border-radius:10px; resize:vertical;
	background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
	border:1px solid rgba(255,255,255,0.04); color: inherit; outline:none; transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}
textarea:focus{ box-shadow: 0 8px 30px rgba(255,107,159,0.08); transform: translateY(-2px); border-color: var(--accent1) }

.controls{ margin-top:12px; display:flex; gap:10px; align-items:center }

button{ display:inline-flex; gap:8px; align-items:center; padding:10px 14px; border-radius:10px; cursor:pointer;
	border: none; background: linear-gradient(90deg,var(--accent1),var(--accent2)); color:#111; font-weight:700; box-shadow: 0 6px 20px rgba(255,107,159,0.12); transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
}
button:hover{ transform: translateY(-4px) scale(1.01); box-shadow: 0 14px 34px rgba(255,107,159,0.14) }
button:active{ transform: translateY(-1px) scale(0.995); opacity:0.96 }

input[type="file"]{ color:var(--muted); }

.result{ margin-top:22px; display:flex; gap:18px; align-items:flex-start }

.summary{ flex:1; padding:18px; border-radius:12px; background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03);
	box-shadow: 0 8px 30px rgba(2,6,23,0.5); transition: transform .12s ease }
.summary:hover{ transform: translateY(-6px) }

.label{ display:flex; align-items:center; gap:12px; font-size:20px; font-weight:800 }
.label .emoji{ font-size:34px; filter: drop-shadow(0 6px 18px rgba(255,89,94,0.12)) }
.scores{ margin-top:10px; color:var(--muted); font-weight:600 }

.chartWrap{ width:420px; min-height:200px; padding:12px; border-radius:12px; background: linear-gradient(180deg, rgba(255,89,94,0.06), rgba(255,209,102,0.02)); border:1px solid rgba(255,255,255,0.03); box-shadow: 0 12px 36px rgba(255,89,94,0.05) }

.meta{ margin-top:8px; color:var(--muted); font-size:13px }

footer{ margin-top:18px; color:var(--muted); font-size:13px; min-height:28px; padding:6px 0 }

/* Tiny sentiment bar for chat messages */
.sentibar{ display:inline-flex; gap:6px; align-items:center; margin-top:6px }
.sentibar .bar{ display:inline-flex; height:6px; width:120px; border-radius:4px; overflow:hidden; border:1px solid var(--border); background: rgba(255,255,255,0.06) }
.sentibar .seg{ height:100% }
.sentibar .pos{ background:#4caf50 }
.sentibar .neu{ background:#9e9e9e }
.sentibar .neg{ background:#f44336 }
.sentibar .label{ font-size:11px; opacity:0.85 }

/* Small screens */
@media (max-width:800px){
	.result{ flex-direction:column }
	.chartWrap{ width:100% }
	.section-content{ max-height:unset }
}
